// EC2 Connection via AWS Systems Manager Session Manager
// This works without a public IP by using AWS SSM

// Note: This requires AWS CLI and Session Manager plugin
// Install: https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager-working-with-install-plugin.html

mode := "interpret";
setting := "configuration";
super_user := true;
on_error := "rollback";

// For SSM, we use the instance ID instead of IP
target := "ec2-user@i-0758d679383783e48";  // Your instance ID

fn main() {
    print("🔗 EC2 Connection via AWS Systems Manager");
    print("=========================================");
    print("Instance ID: i-0758d679383783e48");
    print("");
    
    print("⚠️  This method requires:");
    print("   1. AWS CLI configured with your credentials");
    print("   2. Session Manager plugin installed");
    print("   3. EC2 instance has SSM agent (Amazon Linux has it by default)");
    print("   4. IAM role attached to EC2 with SSM permissions");
    print("");
    
    // Test connection
    test_ssm_connection();
}

fn test_ssm_connection() {
    print("🧪 Testing SSM connection...");
    
    print("💡 To connect manually via SSM:");
    print("   aws ssm start-session --target i-0758d679383783e48");
    print("");
    
    print("📊 If SSM is configured, system info will appear below:");
    sysinfo();
}
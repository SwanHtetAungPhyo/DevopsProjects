{
  "name": "Event Driven Infrastructure",
  "image": "ubuntu:22.04",

  "customizations": {
    "jetbrains": {
      "backend": "GoLand",
      "settings": {
        "com.intellij:app:HttpConfigurable.use_proxy_pac": true,
        "com.intellij:app:BaseRefactoringSettings.move_search_for_references_for_file": false
      },
      "plugins": [
        "org.jetbrains.plugins.go"
      ]
    }
  },

  "features": {
    "ghcr.io/devcontainers/features/git": {},
    "ghcr.io/devcontainers/features/go:1": {
      "version": "1.23"
    },
    "ghcr.io/devcontainers/features/aws-cli:1": {},
    "ghcr.io/devcontainers/features/docker-in-docker:2": {}
  },

  "postCreateCommand": "bash .devcontainer/setup.sh",

  "remoteEnv": {
    "AWS_PROFILE": "kyaw-zin",
    "AWS_REGION": "us-east-1",
    "GOPATH": "/home/ubuntu/go",
    "PATH": "${containerEnv:PATH}:/home/ubuntu/.pulumi/bin:/home/ubuntu/go/bin"
  },

  "mounts": [
    "source=${localEnv:HOME}/.aws,target=/home/ubuntu/.aws,type=bind,consistency=cached",
    "source=${localEnv:HOME}/.pulumi,target=/home/ubuntu/.pulumi,type=bind,consistency=cached"
  ],

  "remoteUser": "ubuntu"
}